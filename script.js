const storebook=[
  {
  "id": 1,
  "title": "To Kill a Mockingbird",
  "author": "Harper Lee",
  "publication_year": 1960,
  "genre": [
    "Fiction",
    "epic"
  ],
  "price":"40$",
  "description": "A classic novel depicting racial injustice in the American South.",
  "cover_image": "img/9781857992915.jpg"
},
{
  "id": 2,
  "title": "1984",
  "author": "George Orwell",
  "publication_year": 1949,
  "price":"40$",
  "genre": [
    "Dystopian",
    "Science Fiction"
  ],
  "description": "A dystopian novel portraying a totalitarian society.",
  "cover_image": "img/mercy.jpg"
},
{
  "id": 3,
  "title": "Pride and Prejudice",
  "author": "Jane Austen",
  "publication_year": 1813,
  "price":"40$",
  "genre": [
    "Classic",
    "Romance"
  ],
  "description": "A classic novel exploring themes of love, marriage, and social norms.",
  "cover_image": "https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcTxVkRlEFZ36_wsyIO7O1pPWxzxkfhZPlzD3-BTr5Bbr4QoWUjGMy6hz-DpDb-JuZvI8u2myCCDE5-_FL2WcHhgYdxL6VKN_P0cErNFE__yAYujFQYgApRYGA&usqp=CAE"
},
{
  "id": 4,
  "title": "The Great Gatsby",
  "author": "F. Scott Fitzgerald",
  "publication_year": 1925,
  "price":"40$",
  "genre": [
    "Fiction",
    "Classic"
  ],
  "description": "A tale of the American Dream, wealth, and love during the Roaring Twenties.",
  "cover_image": " https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQWwvpfPRky0vUq6reIH0coVD_KXgETS3BIEQ&s"
},
{
  "id": 5,
  "title": "Moby-Dick",
  "author": "Herman Melville",
  "publication_year": 1851,
  "price":"40$",
  "genre": [
    "Fiction",
    "Adventure"
  ],
  "description": "The epic tale of Captain Ahab's obsession with the white whale.",
  "cover_image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSaqRy5uJ-ga2RgJWXUHAKB_oRJ7oLLrCjsyw&s"
},
{
  "id": 6,
  "title": "The Lord of the Rings",
  "author": "J.R.R. Tolkien",
  "publication_year": 1954,
  "price":"40$",
  "genre": [
    "Fantasy",
    "Adventure"
  ],
  "description": "An epic fantasy saga about the quest to destroy the One Ring.",
  "cover_image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ9GK7zXBR-r5p0BjhvnC2VN6kumJxC1Ab_qw&s"
},
{
  "id": 7,
  "title": "The Catcher in the Rye",
  "author": "J.D. Salinger",
  "price":"40$",
  "publication_year": 1951,
  "genre": [
    "Fiction",
    "Coming-of-age"
  ],
  "description": "A classic coming-of-age novel following Holden Caulfield's journey.",
  "cover_image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRGyduSc-hcziGUK11z9hfT3XKyD3Me1TT9MA&s"
},
{
  "id": 8,
  "title": "The Hobbit",
  "author": "J.R.R. Tolkien",
  "publication_year": 1937,
  "price":"40$",
  "genre": [
    "Fantasy",
    "Adventure"
  ],
  "description": "The prequel to The Lord of the Rings, following Bilbo Baggins' journey.",
  "cover_image": "https://encrypted-tbn1.gstatic.com/shopping?q=tbn:ANd9GcTKpzerb9G_00yKDAMzx0ImYuxW0JRwAjvf8Df2p2w0mOWKkgR_8beN1ggY37VFXiQ8180dzCFgqC0qaPxGhK-OFl_tyQL_yJE3V9TV6kH8&usqp=CAE"
},
{
  "id": 9,
  "title": "One Hundred Years of Solitude",
  "author": "Gabriel Garcia Marquez",
  "publication_year": 1967,
  "price":"40$",
  "genre": [
    "Magical Realism",
    "Literary Fiction"
  ],
  "description": "A multi-generational saga of the BuendÃ­a family in the fictional town of Macondo.",
  "cover_image": "https://encrypted-tbn2.gstatic.com/shopping?q=tbn:ANd9GcROPw19TKbZRGjHVZQf4pwIb3wAr-NS1DZYfheoyGNLppoOGsYWKEMZhhJEvCPnfDJJjgHa72vPa06gp1i5_Q8Qh5Mhz04X865J4EiJPIkSXEfnZ3Ej5u1U1Q&usqp=CAE"
},
{
  "id": 10,
  "title": "War and Peace",
  "author": "Leo Tolstoy",
  "price":"40$",
  "publication_year": 1869,
  "genre": [
    "Historical Fiction",
    "Epic"
  ],
  "description": "A monumental work depicting the events of Russian society during the Napoleonic era.",
  "cover_image": "https://encrypted-tbn3.gstatic.com/shopping?q=tbn:ANd9GcTbmN61Km9wdKv0DosC8RXF4c85qk7jUb_KU49_b2FuA7QATz--ndU8fMxiyNpAu2Ju4MMP1xLB6m5EsxK9Vmh9_cmEeSRLLRqSAmdV9wq3DU_U5Zg5kP1t&usqp=CAE"
},
{
  "id": 11,
  "title": "The Odyssey",
  "author": "Homer",
  "price":"40$",
  "publication_year": "8th century BCE",
  "genre": [
    "Epic",
    "Mythology"
  ],
  "description": "An ancient Greek epic poem recounting Odysseus' ten-year journey home after the Trojan War.",
  "cover_image": "https://encrypted-tbn1.gstatic.com/shopping?q=tbn:ANd9GcQUzs--6Q0NyVfUJD76miO0bee7MuEct1X5uolZifZ-XYLic4tRnWAkkNZYBQYRJLnnvSg28POjUQSv8-3xUROAs5_Y_7Qmk-cDkzC597KAU9Q5HUtz80lGPQ&usqp=CAE"
},
{
  "id": 12,
  "title": "The Divine Comedy",
  "author": "Dante Alighieri",
  "publication_year": "1320",
  "price":"40$",
  "genre": [
    "Epic",
    "Poetry"
  ],
  "description": "An epic poem that follows the journey of the soul through Hell, Purgatory, and Heaven.",
  "cover_image": "https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcSGbZFgQFjDh41EtQwV1PjLeCze1pvz07ilDdCjDPkUWJ5bzlCnQiIlSDd0dnJJqYn4lSwWcKXYMjdbZFRmHtwlRmyryxgJH3P7atfZOS4r_jGYqvdItXwJ&usqp=CAE"
},
{
  "id": 13,
  "title": "The Brothers Karamazov",
  "author": "Fyodor Dostoevsky",
  "publication_year": 1880,
  "genre": [
    "Classic",
    "Philosophical Fiction"
  ],
  "description": "A complex novel exploring themes of spirituality, morality, and human nature.",
  "cover_image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTD6jGD8sP-Yh_ZW38BZNSqNy6EEJBWdSpDag&s"
},
{
  "id": 14,
  "title": "Crime and Punishment",
  "author": "Fyodor Dostoevsky",
  "publication_year": 1866,
  "price":"40$",
  "genre": [
    "Classic",
    "Psychological Fiction"
  ],
  "description": "A psychological thriller revolving around guilt, conscience, and redemption.",
  "cover_image": "https://encrypted-tbn2.gstatic.com/shopping?q=tbn:ANd9GcRFrRs120wpMg6h58xU79oA-BFemsY-Vj55uNli6mEXFrtvD1s3bEAF8D11ZaVr87Fw127xo4XO4Lf8Rk1u9S1gvYibRuRHOvv7jPSSFry66Bip10r-foQOVg&usqp=CAE"
},
{
  "id": 15,
  "title": "The Picture of Dorian Gray",
  "author": "Oscar Wilde",
  "publication_year": 1890,
  "price":"40$",
  "genre": [
    "Gothic",
    "Philosophical Fiction"
  ],
  "description": "A novel about a man whose portrait ages while he retains his youth and beauty.",
  "cover_image": "https://encrypted-tbn1.gstatic.com/shopping?q=tbn:ANd9GcSXX4SbpcThMDfpgsNdtO8wtRsNNwL9Otfp6yJBCVmjEEr_fSYhQNY5sQJ4aHC43LCOWldF08aMXw76fuL4MdnfKhVefjfvSyFgBg1SGo8S&usqp=CAE"
},
{
  "id": 16,
  "title": "Brave New World",
  "author": "Aldous Huxley",
  "publication_year": 1932,
  "price":"40$",
  "genre": [
    "Dystopian",
    "Science Fiction"
  ],
  "description": "A dystopian vision of a future society obsessed with pleasure and conformity.",
  "cover_image": "https://encrypted-tbn2.gstatic.com/shopping?q=tbn:ANd9GcTj0Fvs82p74h2yIuAbUJjp2zFyXNkHHJkGsotcEYFvtG89dKspX-oBKeVo2U5WY9cWcSCoQyHr-VBNpS3GfEhYRXOGxIEwq0K6mLwSdssPoRp6kx0Bcw0Fjg&usqp=CAE"
},
{
  "id": 17,
  "title": "The Count of Monte Cristo",
  "author": "Alexandre Dumas",
  "publication_year": 1844,
  "price":"40$",
  "genre": [
    "Adventure",
    "Historical Fiction"
  ],
  "description": "An adventure novel of revenge, love, and redemption set in the early 19th century.",
  "cover_image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRdr8v5-vglBCNeG31sJwfE9TLSF8avRZcE_Q&s"
},
{
  "id": 18,
  "title": "Anna Karenina",
  "author": "Leo Tolstoy",
  "publication_year": 1877,
  "price":"40$",
  "genre": [
    "Classic",
    "Romance"
  ],
  "description": "A tragic love story set against the backdrop of Russian high society.",
  "cover_image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT4FCOm7C3gzITwKH8sNRsBZp4Ob24LMRuOjQ&s"
},
{
  "id": 19,
  "title": "The Alchemist",
  "author": "Paulo Coelho",
  "publication_year": 1988,
"price":"70$",
  "genre": [
    "Fiction",
    "Philosophical"
  ],
  "description": "A philosophical novel about a shepherd boy's journey to find his personal legend.",
  "cover_image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSwwnH_B2rYp79IuuVloOi_o2PZHNKc73BVHw&s"
},
{
  "id": 20,
  "title": "The Adventures of Huckleberry Finn",
  "author": "Mark Twain",
  "publication_year": 1884,
  "price":"70$",

  "genre": [
    "Adventure",
    "Satire"
  ],
  "description": "A satirical novel following Huck Finn's journey down the Mississippi River.",
  "cover_image": " https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSV5f993BaD6COY_b6YGUrrnpEt2c1KZ9vxNA&s"
},
{
  "id": 21,
  "title": "The Iliad",
  "author": "Homer",
  "publication_year": "8th century BCE",
  "price":"70$",

  "genre": [
    "Epic",
    "Mythology"
  ],
  "description": "An ancient Greek epic poem about the Trojan War and the hero Achilles.",
  "cover_image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQn_RQjQ7LRtoL2KdOzpwvT4_k-QNYIg9iJkA&s"
},
]
const favoriteArray = JSON.parse(localStorage.getItem('favorites')) || [];
const displayFilteredData = document.querySelector('#displayFilteredData');

document.addEventListener("DOMContentLoaded", () => {
    const adventureBooksContainer = document.getElementById("adventure-books-container");
    const romanceClassicalBooksContainer = document.getElementById("romance-classical-books-container");
    const displayallbookContainer = document.querySelector('#displayall');

    const filterBooksByGenre = (genre) => {
        const filteredBooks = storebook.filter(book => book.genre.includes(genre));
        displayFilteredData.innerHTML = '';
        filteredBooks.forEach((book, index) => createBookCard(book, displayFilteredData, index));
    };

    window.filterBooksByGenre = filterBooksByGenre; // Make the function globally accessible

    const createBookCard = (book, container, index) => {
        const cardOut = document.createElement("div");
        cardOut.className = "card-out";
        cardOut.setAttribute('data-index', index);
        cardOut.innerHTML = `
            <div class="card">
                <div class='image'>
                    <img src="${book.cover_image}" alt="${book.title}">
                </div>
                <div class="item-info">
                    <div class="book-name">${book.title}</div>
                    <div class="author-name">${book.author}</div>
                    <p>${book.genre.join(', ')}</p>
                    <div class="like-container">
                        <i class="fa fa-heart" style="color: ${isBookInFavorites(book) ? 'red' : 'lightgray'};" data-book-id="${book.id}"></i>
                        <p>${[...Array(5)].map((_, i) => `<i class="fa-solid fa-star ${i < 4 ? 'color' : 'col'}"></i>`).join('')}</p>
                    </div>
                    <button class="view-details" data-index="${index}">View Details</button>
                </div>
            </div>
        `;
        container.appendChild(cardOut);

        const heartIcon = cardOut.querySelector('.fa-heart');
        heartIcon.addEventListener("click", () => toggleFavorite(book, heartIcon));

        const handleClick = () => {
            const { cover_image, title, author, publication_year, genre, description } = book;
            localStorage.setItem("bookDetails", JSON.stringify({ cover_image, title, author, publication_year, genre, description }));
            window.location.href = "bookdetail.html";
        };

        const imageElement = cardOut.querySelector('.image img');
        const buttonElement = cardOut.querySelector('.view-details');

        imageElement.addEventListener("click", handleClick);
        buttonElement.addEventListener("click", handleClick);
    };

    window.createBookCard = createBookCard; // Make the function globally accessible

    const toggleFavorite = (book, icon) => {
        const index = favoriteArray.findIndex(favBook => favBook.id === book.id);
        if (index === -1) {
            favoriteArray.push(book);
            icon.style.color = 'red';
        } else {
            favoriteArray.splice(index, 1);
            icon.style.color = 'lightgray';
        }
        localStorage.setItem('favorites', JSON.stringify(favoriteArray));
    };

    window.toggleFavorite = toggleFavorite; // Make the function globally accessible

    const isBookInFavorites = (book) => {
        return favoriteArray.some(favBook => favBook.id === book.id);
    };

    window.isBookInFavorites = isBookInFavorites; // Make the function globally accessible

    const adventureBooks = storebook.filter(book => book.genre.includes('Adventure'));
    adventureBooks.forEach((book, index) => createBookCard(book, adventureBooksContainer, index));

    storebook.forEach((book, index) => createBookCard(book, displayallbookContainer, index));

    const romanceClassicalBooks = storebook.filter(book => ['Epic', 'Classical'].some(g => book.genre.includes(g)));
    romanceClassicalBooks.forEach((book, index) => createBookCard(book, romanceClassicalBooksContainer, index));
});

const displayBook = () => {
    const userInput = document.getElementById('userinput').value.toLowerCase();
    const resultsContainer = document.getElementById('displayFilteredData');
    resultsContainer.innerHTML = '';

    const filteredBooks = storebook.filter(book => book.title.toLowerCase().includes(userInput));
    filteredBooks.forEach((book, index) => createBookCard(book, resultsContainer, index));

    if (filteredBooks.length === 0) {
        resultsContainer.innerHTML = '<p class="text-center">No results found.</p>';
    }
};

document.getElementById('userinput').addEventListener('input', displayBook);

const toggleFavorite = (iconElement) => {
    const bookId = parseInt(iconElement.getAttribute('data-book-id'));
    const book = storebook.find(book => book.id === bookId);

    if (!book) return;

    const index = favoriteArray.findIndex(favBook => favBook.id === book.id);
    if (index === -1) {
        favoriteArray.push(book);
        iconElement.style.color = 'red';
    } else {
        favoriteArray.splice(index, 1);
        iconElement.style.color = 'lightgray';
    }
    localStorage.setItem('favorites', JSON.stringify(favoriteArray));
};


// =======pranali js=======
const mainLoginbtn = document.querySelector(".login-btn");
const crossbtn = document.querySelector(".cross");
const loginPage = document.querySelector(".login-wrapper");
const loginbtn = document.querySelector("#addForm");

loginbtn.addEventListener("submit", formSubmit);

function formSubmit(e) {
  e.preventDefault();

  const userMail = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  const payload = {
    userMail: userMail,
    password: password,
  };
  console.log(payload, "this is payload");
}

mainLoginbtn.addEventListener("click", openpage);

function openpage() {
  loginPage.classList.add("open-modal");
}

crossbtn.addEventListener("click", function () {
  loginPage.classList.remove("open-modal");
});

// authors js
const slides = document.querySelector('.slides');
const images = document.querySelectorAll('.slides img');
const prevBtn = document.getElementById('prev');
const nextBtn = document.getElementById('next');

let counter = 0;
const size = images[0].clientWidth;

nextBtn.addEventListener('click', () => {
    if (counter >= images.length - 4) return;
    slides.style.transform = 'translateX(' + (size * (counter + 1)) + 'px)';
    counter++;
});

prevBtn.addEventListener('click', () => {
    if (counter <= 0) return;
    slides.style.transform = 'translateX(' + (-size * (counter - 1)) + 'px)';
    counter--;
});


function filterData(data){

}